!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t:e.responsible=t()}(this,function(){addListener=function(e,t,o){e&&(e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o)},removeListener=function(e,t,o){e&&(e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent?e.detachEvent("on"+t,o):e["on"+t]=null)},_logStr=function(e){window.console&&window.console.log("Responsible: "+e)},_argsOrDefault=function(e,t){return"undefined"!=typeof e[t]?e[t]:i[t]},extend=function(e,t){var o,n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},_createCookie=function(e,t,o,n){var i="";if(o){var l=new Date;l.setTime(l.getTime()+24*o*60*60*1e3),i="; expires="+l.toGMTString()}n&&(i="; expires="+o.toGMTString()),document.cookie=e+"="+t+i+"; path=/"},_readCookie=function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},_getWidth=function(){var e="CSS1Compat"===document.compatMode?document.documentElement:document.body;return e.clientWidth},_getViewPort=function(){var e=document.querySelector("meta[name=viewport]");return e?e:(e=document.createElement("meta"),e.name="viewport",e.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",document.getElementsByTagName("head")[0].appendChild(e),e)},_loadCSS=function(e){var t=document.getElementById("responsible-css");if(t)return!1;var o=document.createElement("link");o.id="responsible-css",o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(o)},_removeCSS=function(e){e=e||i.cssPath,console.log("filename",e);for(var o=document.getElementsByTagName("link"),n=o.length;n>=0;n--)console.log(o[n]),o[n]&&null!==o[n].getAttribute("href")&&-1!==o[n].getAttribute("href").indexOf(e)&&(console.log("match on ",e),t=o[n].getAttribute("href"),o[n].parentNode.removeChild(o[n]))},noOp=function(){};var e,t,o={},n=_getViewPort(),i={cssPath:"css/responsive.css",desktopWidth:1280,toggleThreshold:980,desktopToggleDisplay:!0,desktopToggleText:"Toggle Mobile Site",desktopCallback:noOp,mobileToggleDisplay:!0,mobileToggleText:"View Full Site",mobileToggleAlign:"right",mobileToggleBottom:"0px",mobileCallback:noOp};return _desktopAddToggle=function(){var e=document.getElementById("responsible-toggle");if(e||!Options.desktopToggleDisplay)return!1;var t=document.body.children[0],n=document.createElement("div");n.id="responsible-toggle",n.style.padding="40px 0px 40px",n.style.width="100%",n.style.color="#eaeaea",n.style.fontSize="60px",n.style.fontWeight="bold",n.style.backgroundColor="#444",n.style.textAlign="center",n.style.cursor="pointer",n.innerText=Options.desktopToggleText,document.body.insertBefore(n,t),addListener(n,"click",o.mobile)},_desktopRemoveToggle=function(){var e=document.getElementById("responsible-toggle");e&&(console.log("Destroy desktop toggle"),removeListener(e,"click",o.mobile),document.body.removeChild(e))},_mobileAddToggle=function(){var e=document.getElementById("responsible-mobile-toggle");if(e||!Options.mobileToggleDisplay)return!1;var t=document.body.children[0],n=document.createElement("div");n.id="responsible-mobile-toggle",n.style.position="fixed",n.style.padding="10px",n.style.color="#eaeaea",n.style.fontSize="14px",n.style.backgroundColor="#444",n.style.width="100%",n.style.opacity="0.9",n.style.textAlign="center",n.style[Options.mobileToggleAlign]="0px",n.style.bottom=Options.mobileToggleBottom,n.style.zIndex="99999999",n.innerText=Options.mobileToggleText,document.body.insertBefore(n,t),addListener(n,"click",o.desktop)},_mobileRemoveToggle=function(){var e=document.getElementById("responsible-mobile-toggle");e&&(console.log("Destroy mobile toggle"),removeListener(e,"click",o.desktop),document.body.removeChild(e))},o.init=function(t){t=t||{},Options=extend(i,t),_getWidth()<Options.toggleThreshold?(e="mobile",_mobileAddToggle(),OnDesktop=!1):(e="desktop",OnDesktop=!0)},o.desktop=function(){return"desktop"===e?(_logStr("Desktop mode already active"),!1):(e="desktop",_removeCSS(Options.cssPath),n.setAttribute("content","width="+Options.desktopWidth+", user-scalable=yes, initial-scale=.25, maximum-scale=.35"),_mobileRemoveToggle(),_desktopAddToggle(),void setTimeout(function(){n.setAttribute("content","width="+Options.desktopWidth+", user-scalable=yes, initial-scale=.25, maximum-scale=1"),Options.desktopCallback&&"function"==typeof Options.desktopCallback&&Options.desktopCallback()},300))},o.mobile=function(){if("mobile"===e)return _logStr("Mobile state already active"),!1;if(OnDesktop)return _logStr("You are on a desktop. Resize your browser"),!1;e="mobile";var o=t?t:Options.cssPath;_loadCSS(o),_desktopRemoveToggle(),_mobileAddToggle(),n.setAttribute("content","width=device-width, user-scalable=yes, initial-scale=1"),Options.mobileCallback&&"function"==typeof Options.mobileCallback&&Options.mobileCallback()},o});
